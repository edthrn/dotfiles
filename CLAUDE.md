# CLAUDE.md - AI Assistant Guide for Dotfiles Repository

This document provides comprehensive guidance for AI assistants working with this personal dotfiles repository. Last updated: 2026-01-12

## Repository Overview

**Owner:** Edouard Theron (ed@edtheron.me)
**Purpose:** Personal development environment configuration for terminal-based workflow
**Philosophy:** Minimal, modular, framework-based configuration that extends defaults rather than replacing them

## Repository Structure

```
dotfiles/
├── README.md                 # Minimal documentation with TODOs
├── install.sh               # Installation/symlink automation script
├── alacritty/               # GPU-accelerated terminal emulator config
├── bash/                    # Bash shell configuration (legacy support)
├── git/                     # Git version control configuration
├── nvim/                    # Neovim text editor (primary, most complex)
├── pycharm/                 # PyCharm IDE settings backup (JAR file)
├── tmux/                    # Terminal multiplexer configuration
├── vim/                     # Vim editor (legacy fallback)
└── zsh/                     # Z shell configuration (primary shell)
```

### Organization Pattern

**ONE TOOL = ONE DIRECTORY**
Each application/tool has a dedicated directory containing all its configuration files. This modular approach makes it easy to:
- Locate specific tool configurations
- Add/remove tool configs independently
- Understand the scope of each tool's customization

## Key Tools and Configurations

### 1. Neovim (`/nvim`) - PRIMARY EDITOR

**Framework:** LazyVim (modern Neovim distribution)
**Plugin Manager:** lazy.nvim (47 plugins)
**Configuration Language:** Lua

#### File Structure
```
nvim/
├── init.lua                    # Bootstrap + telescope keybindings
├── lazy-lock.json             # Plugin dependency lock file (DO NOT EDIT MANUALLY)
├── lazyvim.json               # LazyVim extras configuration
├── .neoconf.json              # neodev/neoconf settings
├── stylua.toml                # Lua formatter (2-space indent)
├── lua/
│   ├── config/
│   │   ├── lazy.lua           # Lazy plugin manager setup
│   │   ├── options.lua        # Editor options (EXTENDS LazyVim defaults)
│   │   ├── keymaps.lua        # Custom keybindings (EXTENDS defaults)
│   │   └── autocmds.lua       # Autocommands (EXTENDS defaults)
│   └── plugins/
│       ├── colorscheme.lua    # Dracula theme setup
│       ├── cmp.lua            # Completion (autocomplete DISABLED)
│       ├── telescope.lua      # Fuzzy finder configuration
│       ├── no-ruff-lsp.lua    # Ruff LSP disabled
│       ├── no-inlay-hints.lua # Inlay hints disabled
│       └── example.lua        # Plugin configuration patterns
```

#### Important Conventions
- **EXTENDS, NOT REPLACES:** Files in `lua/config/` extend LazyVim defaults, don't replace them
- **Plugin Per File:** Each plugin customization lives in separate file under `lua/plugins/`
- **Disable Pattern:** Unwanted features use explicit `enabled = false` (see no-ruff-lsp.lua, no-inlay-hints.lua)
- **LazyVim Extras:** Python support enabled via `LazyVim.extras.lang.python`

#### Key Customizations
- Tab-based completion (manual trigger only, NO autocomplete)
- Ghost text DISABLED
- Inlay hints DISABLED
- Ruff LSP DISABLED (prefer other Python LSP servers)
- Telescope keybindings in init.lua
- Dracula colorscheme

#### Important Files to Check Before Changes
- `nvim/lazy-lock.json` - Plugin versions (regenerated by lazy.nvim)
- `nvim/lazyvim.json` - LazyVim extras configuration
- `nvim/lua/plugins/cmp.lua` - Completion behavior customization

### 2. Zsh (`/zsh`) - PRIMARY SHELL

**Framework:** Oh-My-Zsh
**Theme:** Dracula (primary), edouard-custom (fallback)
**Plugins:** git, python, docker, django, zsh-navigation-tools, zsh-completions, aws, kubectl, go

#### Files
- `.zshrc` - Main configuration
- `edouard-custom.zsh-theme` - Custom theme (green/cyan/magenta)
- `edouard-root.zsh-theme` - Root user variant

#### Important Aliases
```bash
nv      # nvim
sbcl    # Steel Bank Common Lisp with rlwrap
vbox    # VirtualBox
clojure # Clojure with rlwrap
clj     # Clojure with rlwrap
```

#### Environment Variables
- Miniconda3 integration configured
- Go path: `$HOME/code/drafts/go`
- Scala/SBT support

### 3. Tmux (`/tmux`) - TERMINAL MULTIPLEXER

**Prefix Key:** Ctrl+A (NOT default Ctrl+B)

#### Critical Keybindings
```
Ctrl+A |    # Split horizontal
Ctrl+A -    # Split vertical
Alt+Arrow   # Navigate panes (NO PREFIX NEEDED)
Ctrl+A r    # Reload tmux config
Ctrl+A P    # Paste from tmux buffer
Ctrl+A v    # Begin selection (copy mode)
Ctrl+A y    # Copy selection
Ctrl+A >    # Copy to system clipboard
```

#### Settings
- Mouse support: ENABLED
- Base index: 1 (windows/panes start at 1, not 0)
- Escape time: 0 (Neovim optimization)
- 256-color terminal support

### 4. Git (`/git`) - VERSION CONTROL

#### Files
- `.gitconfig` - Global git configuration
- `.gitignore_global` - Global ignore patterns
- `.gitattributes_global` - Global attributes (notebook cleaner filter)

#### Important Aliases
```bash
git lg      # Pretty log with graph
git last    # Show HEAD commit
```

#### Global Ignore Patterns
**ALWAYS IGNORED GLOBALLY:**
- Python: `__pycache__`, `*.pyc`, `.pytest_cache`, `venv/`, `.venv/`, `.ipynb_checkpoints/`
- IDEs: `.idea/`, `.vscode/`
- Secrets: `*.pem`, `*.cert`, `*.key`, `*.env`
- OS: `.DS_Store`, `Thumbs.db`

#### Git Configuration Highlights
- Default editor: vim
- Default branch: master
- Push: simple
- Pull: rebase with autostash
- Merge: no fast-forward

### 5. Alacritty (`/alacritty`) - TERMINAL EMULATOR

**Configuration Format:** TOML
**Theme:** Dracula (imported)

#### Settings
- F11: Toggle fullscreen
- Font Y offset: +2px
- Full Dracula color palette configured

### 6. Bash (`/bash`) - LEGACY SHELL

Standard Debian/Ubuntu bash configuration with:
- Miniconda3 support
- Go path configuration
- Standard aliases (ls, grep with colors)

### 7. Vim (`/vim`) - LEGACY EDITOR

**Plugin Manager:** Pathogen
**Purpose:** Fallback when Neovim unavailable

#### Features
- 5 color schemes available
- Language-specific indentation (Python: 4-space, JS/YAML/JSON: 2-space)
- Paste mode detection for Xterm

## Development Workflows

### Installation Workflow

The `install.sh` script automates dotfiles installation:

```bash
cd ~/dotfiles
./install.sh
```

**What it does:**
1. Renames `~/dotfiles` to `~/.dotfiles`
2. Creates symlinks for all configuration files to home directory
3. Links Oh-My-Zsh themes
4. Links Neovim config to `~/.config/nvim`
5. Links Alacritty config to `~/.config/alacritty`

**IMPORTANT:** The script has TODOs (see README.md):
- Improve Oh-My-Zsh installation handling
- Improve live logging

### Making Configuration Changes

#### General Pattern
1. **Read before modifying:** ALWAYS read existing config files first
2. **Extend, don't replace:** Add to existing patterns rather than rewriting
3. **Follow conventions:** Match existing style (indentation, comments, structure)
4. **Test changes:** Configuration changes should be testable where possible

#### Neovim Plugin Changes
**To add a new plugin:**
1. Create new file: `nvim/lua/plugins/plugin-name.lua`
2. Follow pattern from `nvim/lua/plugins/example.lua`
3. Return plugin spec table with configuration
4. Let lazy.nvim handle installation (updates `lazy-lock.json`)

**To disable a feature:**
1. Create file like `nvim/lua/plugins/no-feature-name.lua`
2. Return plugin spec with `enabled = false`
3. See `no-ruff-lsp.lua` or `no-inlay-hints.lua` for examples

**To modify existing plugin:**
1. Create override file in `nvim/lua/plugins/`
2. Override only specific options (see `cmp.lua` example)
3. LazyVim will merge your overrides with defaults

#### Shell Configuration Changes
- **Zsh:** Modify `.zshrc` directly
- **Bash:** Modify `.bashrc` directly
- **Aliases:** Add to appropriate shell's rc file
- **Environment variables:** Add to appropriate shell's rc file

#### Git Configuration Changes
- **User settings:** Edit `git/.gitconfig`
- **Global ignores:** Add patterns to `git/.gitignore_global`
- **Aliases:** Add to `.gitconfig` under `[alias]` section

## Theme Consistency

**Dracula Theme** is used across multiple tools for visual consistency:
- Zsh (primary theme)
- Alacritty terminal
- Neovim colorscheme

When making visual/color changes, maintain this consistency unless explicitly asked to change themes.

## Code Style and Conventions

### Lua (Neovim configs)
- **Indentation:** 2 spaces (enforced by stylua.toml)
- **Formatter:** stylua
- **Quotes:** Double quotes preferred
- **Comments:** Lua-style `--` comments, include documentation links where helpful

### Shell Scripts
- **Shebang:** `#!/usr/bin/env bash` or `#!/usr/bin/env zsh`
- **Comments:** Document complex logic
- **Error handling:** Use colored output (see install.sh: WARN, ERROR, INFO, SUCCESS)

### Configuration Files
- **TOML:** Used for Alacritty
- **Lua:** Used for Neovim
- **Shell:** Used for bash/zsh rc files
- **Git config:** INI-style format

## Programming Language Support

This environment is configured for **polyglot development**:

| Language | Support Level | Tools |
|----------|--------------|-------|
| **Python** | Primary | LazyVim.extras.lang.python, pytest, flake8 |
| **Lua** | Primary | stylua, neoconf, lazydev (for Neovim) |
| **JavaScript** | Secondary | treesitter, LSP-ready |
| **Go** | Secondary | Path configured, oh-my-zsh plugin |
| **Scala** | Secondary | SBT configured |
| **Common Lisp** | Tertiary | sbcl with rlwrap |
| **Clojure** | Tertiary | clojure/clj with rlwrap |

### DevOps Tools
- Docker (oh-my-zsh plugin)
- Kubernetes/kubectl (oh-my-zsh plugin)
- AWS CLI (oh-my-zsh plugin)

## Important Context for AI Assistants

### Design Philosophy

1. **Minimal Customization:** Rely on framework defaults (LazyVim, Oh-My-Zsh) where possible
2. **Explicit Disabling:** Use `enabled = false` rather than commenting out or hacking
3. **Modular Organization:** One concern per file/directory
4. **Performance Conscious:** Disable unused features (e.g., autocomplete, inlay hints)
5. **Framework-First:** Extend framework configs, don't replace them

### When Modifying Configurations

**DO:**
- Read existing files before making changes
- Follow existing patterns and conventions
- Use appropriate file locations (e.g., new plugin → `nvim/lua/plugins/`)
- Maintain theme consistency (Dracula)
- Test that symlinks will work correctly
- Preserve comments and documentation
- Match existing indentation and style

**DON'T:**
- Rewrite entire configuration files
- Remove or modify lazy-lock.json manually
- Add emoji to configurations (not the style of this repo)
- Create monolithic configuration files
- Add unnecessary dependencies
- Break symlink structure expected by install.sh
- Add features not explicitly requested

### Common Tasks

#### "Add a Neovim plugin"
1. Create `nvim/lua/plugins/plugin-name.lua`
2. Return plugin spec table
3. Configure plugin options
4. Add keybindings if needed
5. Document what the plugin does

#### "Change shell alias"
1. Determine if bash or zsh (usually zsh)
2. Read `.bashrc` or `.zshrc`
3. Add alias to appropriate section
4. Follow existing alias patterns

#### "Update git configuration"
1. Read `git/.gitconfig`
2. Modify appropriate section
3. Maintain existing formatting

#### "Add global git ignore pattern"
1. Read `git/.gitignore_global`
2. Add pattern to appropriate category
3. Add comment if pattern isn't obvious

#### "Modify tmux keybinding"
1. Read `tmux/.tmux.conf`
2. Add binding with appropriate prefix
3. Document what the binding does

### File Locations Reference

**When files are symlinked by install.sh:**
- `git/.gitconfig` → `~/.gitconfig`
- `git/.gitignore_global` → `~/.gitignore_global`
- `bash/.bashrc` → `~/.bashrc`
- `vim/.vimrc` → `~/.vimrc`
- `vim/.vim/` → `~/.vim/`
- `tmux/.tmux.conf` → `~/.tmux.conf`
- `zsh/.zshrc` → `~/.zshrc`
- `zsh/*.zsh-theme` → `~/.oh-my-zsh/themes/`
- `nvim/` → `~/.config/nvim/`
- `alacritty/` → `~/.config/alacritty/`

### Commit Message Patterns

This repository uses clear, imperative commit messages:

```
Add [tool] config          # Adding new configuration
Update [tool/file]         # Modifying existing config
Fix [issue/bug]            # Fixing a problem
Rename [old] to [new]      # Renaming
Disable [feature]          # Turning off a feature
Enable [feature]           # Turning on a feature
Install [tool] config      # Initial setup
```

**Examples from history:**
- "Add alacritty config"
- "Rename cmp plugin"
- "Disable neovim autocomplete by default"
- "Update gitconfig"
- "Install neovim config"

### Testing Changes

**Neovim:**
- Run `nvim` and check for errors
- Verify `:Lazy` shows plugins correctly
- Test modified keybindings
- Check that LSP/completion works as expected

**Shell:**
- Source the rc file: `source ~/.zshrc` or `source ~/.bashrc`
- Verify aliases work
- Check environment variables are set

**Tmux:**
- Reload config: `Ctrl+A r` (or restart tmux)
- Test modified keybindings
- Verify splits and navigation work

**Git:**
- Run `git config --list` to verify settings
- Test aliases: `git lg`, `git last`
- Check that ignores work in a test repo

## Known TODOs and Limitations

From README.md:
- `install.sh` needs improvement:
  - Better Oh-My-Zsh installation handling
  - Improved live logging

## Performance Optimizations

This configuration is performance-tuned:

**Neovim:**
- Autocomplete disabled (manual trigger only)
- Ghost text disabled
- Inlay hints disabled
- Unused plugins disabled (gzip, tar, zip)
- Ruff LSP disabled (redundant)

**Tmux:**
- Escape-time set to 0 (Neovim responsiveness)

**Shell:**
- Selective plugin loading (only needed plugins)

## Security Considerations

**Global Git Ignores Include:**
- Secrets: `*.pem`, `*.cert`, `*.key`, `*.env`
- Private keys and certificates
- Environment files

**When making changes:**
- Don't commit sensitive information
- Maintain global ignore patterns for secrets
- Be cautious with API keys or tokens in configs

## Key Files to Review

**Before making changes, familiarize yourself with:**

1. `README.md` - Current TODOs and repository purpose
2. `install.sh` - How dotfiles are installed/symlinked
3. `nvim/lua/plugins/example.lua` - Plugin configuration patterns
4. `nvim/lazyvim.json` - Enabled LazyVim extras
5. `git/.gitignore_global` - Global ignore patterns
6. `zsh/.zshrc` - Primary shell configuration
7. `tmux/.tmux.conf` - Tmux keybindings and settings

## Questions to Ask When Uncertain

1. "Should this extend defaults or replace them?" (Usually extend)
2. "Which tool does this affect?" (Determines directory)
3. "Is there an existing pattern for this?" (Check example.lua, existing configs)
4. "Does this maintain theme consistency?" (Dracula theme)
5. "Will install.sh handle this correctly?" (Check symlink patterns)
6. "Does this follow the one-tool-one-directory pattern?"
7. "Is this the minimal change needed?"

## Useful Commands

```bash
# Reload shell configuration
source ~/.zshrc
source ~/.bashrc

# Reload tmux configuration
# (in tmux): Ctrl+A r

# Check Neovim plugins
nvim +Lazy

# Check git configuration
git config --list

# Test symlinks
ls -la ~ | grep dotfiles
ls -la ~/.config/nvim
ls -la ~/.config/alacritty

# View Oh-My-Zsh themes
ls ~/.oh-my-zsh/themes/
```

---

## Summary for AI Assistants

This dotfiles repository represents a **modern, minimal, terminal-based development environment** with:

✓ **Editor-first workflow** (Neovim with LazyVim)
✓ **Polyglot programming** support (Python, Go, Scala, Clojure, JS)
✓ **Terminal productivity** (Zsh + Tmux + Alacritty)
✓ **Clean modular organization** (one tool per directory)
✓ **Extends frameworks** rather than replacing them
✓ **Visual consistency** (Dracula theme throughout)
✓ **Performance optimized** (minimal, explicit configurations)

When working with this repository:
- **Read first, modify second**
- **Follow existing patterns**
- **Extend, don't replace**
- **Keep it minimal**
- **Test your changes**
- **Maintain consistency**

**Last Analysis:** 2026-01-12
**Total Files:** ~19 configuration files
**Primary Editor:** Neovim with LazyVim
**Primary Shell:** Zsh with Oh-My-Zsh
**Total Commits:** 33 (active development)
